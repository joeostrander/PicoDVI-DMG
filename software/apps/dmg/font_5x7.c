#include "font_5x7.h"

#define GLYPH(_c, _r0, _r1, _r2, _r3, _r4, _r5, _r6) \
    { (_c), { (_r0), (_r1), (_r2), (_r3), (_r4), (_r5), (_r6) } }

const glyph_5x7_t font5x7_default[] = {
    GLYPH(' ', 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00),
    GLYPH('?', 0x0E, 0x11, 0x02, 0x04, 0x04, 0x00, 0x04),
    GLYPH('0', 0x0E, 0x11, 0x13, 0x15, 0x19, 0x11, 0x0E),
    GLYPH('1', 0x04, 0x0C, 0x04, 0x04, 0x04, 0x04, 0x0E),
    GLYPH('2', 0x1E, 0x01, 0x01, 0x0E, 0x10, 0x10, 0x1F),
    GLYPH('3', 0x1E, 0x01, 0x01, 0x0E, 0x01, 0x01, 0x1E),
    GLYPH('4', 0x12, 0x12, 0x12, 0x1F, 0x02, 0x02, 0x02),
    GLYPH('5', 0x1F, 0x10, 0x10, 0x1E, 0x01, 0x01, 0x1E),
    GLYPH('6', 0x0F, 0x10, 0x10, 0x1E, 0x11, 0x11, 0x0E),
    GLYPH('7', 0x1F, 0x01, 0x02, 0x04, 0x08, 0x08, 0x08),
    GLYPH('8', 0x0E, 0x11, 0x11, 0x0E, 0x11, 0x11, 0x0E),
    GLYPH('9', 0x0E, 0x11, 0x11, 0x0F, 0x01, 0x01, 0x1E),
    GLYPH('A', 0x0E, 0x11, 0x11, 0x1F, 0x11, 0x11, 0x11),
    GLYPH('B', 0x1E, 0x11, 0x11, 0x1E, 0x11, 0x11, 0x1E),
    GLYPH('C', 0x0E, 0x11, 0x10, 0x10, 0x10, 0x11, 0x0E),
    GLYPH('D', 0x1C, 0x12, 0x11, 0x11, 0x11, 0x12, 0x1C),
    GLYPH('E', 0x1F, 0x10, 0x10, 0x1E, 0x10, 0x10, 0x1F),
    GLYPH('F', 0x1F, 0x10, 0x10, 0x1E, 0x10, 0x10, 0x10),
    GLYPH('G', 0x0E, 0x11, 0x10, 0x17, 0x11, 0x11, 0x0E),
    GLYPH('H', 0x11, 0x11, 0x11, 0x1F, 0x11, 0x11, 0x11),
    GLYPH('I', 0x0E, 0x04, 0x04, 0x04, 0x04, 0x04, 0x0E),
    GLYPH('J', 0x01, 0x01, 0x01, 0x01, 0x11, 0x11, 0x0E),
    GLYPH('K', 0x11, 0x12, 0x14, 0x18, 0x14, 0x12, 0x11),
    GLYPH('L', 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1F),
    GLYPH('M', 0x11, 0x1B, 0x15, 0x11, 0x11, 0x11, 0x11),
    GLYPH('N', 0x11, 0x19, 0x15, 0x13, 0x11, 0x11, 0x11),
    GLYPH('O', 0x0E, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E),
    GLYPH('P', 0x1E, 0x11, 0x11, 0x1E, 0x10, 0x10, 0x10),
    GLYPH('Q', 0x0E, 0x11, 0x11, 0x11, 0x15, 0x12, 0x0D),
    GLYPH('R', 0x1E, 0x11, 0x11, 0x1E, 0x14, 0x12, 0x11),
    GLYPH('S', 0x0F, 0x10, 0x10, 0x0E, 0x01, 0x01, 0x1E),
    GLYPH('T', 0x1F, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04),
    GLYPH('U', 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E),
    GLYPH('V', 0x11, 0x11, 0x11, 0x11, 0x11, 0x0A, 0x04),
    GLYPH('W', 0x11, 0x11, 0x11, 0x11, 0x15, 0x1B, 0x11),
    GLYPH('X', 0x11, 0x11, 0x0A, 0x04, 0x0A, 0x11, 0x11),
    GLYPH('Y', 0x11, 0x11, 0x0A, 0x04, 0x04, 0x04, 0x04),
    GLYPH('Z', 0x1F, 0x01, 0x02, 0x04, 0x08, 0x10, 0x1F),
    GLYPH('-', 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00),
    GLYPH('_', 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F),
    GLYPH('.', 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C),
    GLYPH('"', 0x06, 0x06, 0x02, 0x04, 0x00, 0x00, 0x00),
    GLYPH('=', 0x00, 0x00, 0x1F, 0x00, 0x1F, 0x00, 0x00),
    GLYPH('/', 0x01, 0x02, 0x04, 0x08, 0x10, 0x00, 0x00),
    GLYPH('(', 0x02, 0x04, 0x08, 0x08, 0x08, 0x04, 0x02),
    GLYPH(')', 0x08, 0x04, 0x02, 0x02, 0x02, 0x04, 0x08),
    GLYPH(',', 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x04, 0x08),
    GLYPH('[', 0x0E, 0x08, 0x08, 0x08, 0x08, 0x08, 0x0E),
    GLYPH(']', 0x0E, 0x02, 0x02, 0x02, 0x02, 0x02, 0x0E),
    GLYPH('!', 0x04, 0x04, 0x04, 0x04, 0x00, 0x00, 0x04),
    GLYPH(':', 0x00, 0x0C, 0x0C, 0x00, 0x0C, 0x0C, 0x00),
    GLYPH('\'', 0x06, 0x06, 0x02, 0x00, 0x00, 0x00, 0x00)
};

const size_t font5x7_default_count = sizeof(font5x7_default) / sizeof(font5x7_default[0]);

const glyph_5x7_t *font5x7_lookup(char c)
{
    if (c >= 'a' && c <= 'z') {
        c = (char)(c - 'a' + 'A');
    }

    for (size_t i = 0; i < font5x7_default_count; ++i) {
        if (font5x7_default[i].ch == c) {
            return &font5x7_default[i];
        }
    }

    return &font5x7_default[1]; // '?' fallback
}
